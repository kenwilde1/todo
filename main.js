(()=>{"use strict";const e=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))};let t=[{title:"default",todoList:[["Breakfast","Go get breakfast","16/11/2020","1"],["Gym","get to the gym","01/01/2021","1"]]}];const o=()=>{return e=document.querySelector("#selectProject").value,JSON.parse(localStorage.getItem(e));var e};let r=o();const c=document.querySelector("#todo-container"),a=document.querySelector("#create-todo-form"),l=document.querySelector("#create-project-form"),n=document.querySelector("#edit-todo-form"),s=(document.querySelector("#create-forms"),document.querySelectorAll(".interaction-buttons").forEach((e=>e.addEventListener("click",(t=>{switch(e.id){case"create-todo-button":l.classList.contains("form-style")?n.classList.contains("form-style")?a.classList.toggle("form-style"):alert("You cannot create a new todo item while you are editing a current todo item"):alert("You cannot create a new todo item while you are creating a new project");break;case"create-todo":u();break;case"create-project-button":a.classList.contains("form-style")?n.classList.contains("form-style")?l.classList.toggle("form-style"):alert("You cannot create a new project while you are editing a todo item"):alert("You cannot create a new project while you are creating a new todo item");break;case"create-project":i();break;case"edit-todo-button":break;case"show-todos-button":s();break;case"exit-todo-form":a.classList.toggle("form-style");break;case"exit-project-form":l.classList.toggle("form-style")}if("X"==e.innerHTML)switch(e.id){case"exit-edit-form":n.classList.toggle("form-style")}})))),(()=>{const e=document.querySelector("#selectProject");for(let t=0;t<localStorage.length;t++){const o=document.createElement("option");o.id=localStorage.key(t),o.value=localStorage.key(t),o.innerHTML=localStorage.key(t),e.appendChild(o)}})(),()=>{for(r=o(),c.classList.toggle("form-style");c.childElementCount>0;)c.removeChild(c.lastChild);for(let e=0;e<r.length;e++){const t=document.createElement("div");t.id=e,t.classList.add("todoItem"),c.appendChild(t);for(let o=0;o<6;o++){let c=document.createElement("p");switch(o){case 0:c.id=e+"title",c.innerHTML="Title: "+r[e][o];break;case 1:c.id=e+"desc",c.innerHTML="Description: "+r[e][o];break;case 2:c.id=e+"date",c.innerHTML="Due Date: "+r[e][o];break;case 3:1==r[e][o]&&t.classList.add("priorityOne"),c.id=e+"priority",c.innerHTML="Priority: "+r[e][o];break;case 4:c=document.createElement("button"),c.innerHTML="Edit",c.id=e,c.classList.add("todo-buttons");break;case 5:c=document.createElement("button"),c.innerHTML="Delete",c.id=e,c.classList.add("todo-buttons")}t.appendChild(c)}}d()}),i=()=>{document.querySelector("#selectProject").value;const o=document.querySelector("#project-title-value"),r=(l=o.value,t.push({title:l,todoList:[]}),document.querySelector("#create-project-form")),c=document.querySelector("#selectProject"),a=document.createElement("option");var l;a.value=o.value,a.innerHTML=o.value,c.appendChild(a),r.classList.toggle("form-style"),e(a.value,[])},u=()=>{document.querySelector("#selectProject").value;const t=document.querySelector("#todo-title-value").value,r=document.querySelector("#todo-description-value").value,c=document.querySelector("#todo-date-value").value,l=document.querySelector("#todo-priority-value").value;parseInt(l)>3||parseInt(l)<1?alert("Please choose a priority between 1-3 (High = 1, Medium = 2, Low = 3"):(((t,r,c,a)=>{const l=document.querySelector("#selectProject").value,n=o();n.push([t,r,c,a]),e(l,n)})(t,r,c,l),a.classList.toggle("form-style"),s())},d=()=>{document.querySelectorAll(".todo-buttons").forEach((e=>e.addEventListener("click",(t=>{"Edit"==e.innerHTML?l.classList.contains("form-style")&&a.classList.contains("form-style")?m(e.id):alert("You cannot edit a todo item while you are still editing / creating something else"):"Delete"==e.innerHTML&&y(e.id)}))))},m=t=>{const o=document.querySelector("#selectProject").value;n.classList.toggle("form-style");const c=document.querySelector("#edit-title-value"),a=document.querySelector("#edit-description-value"),l=document.querySelector("#edit-date-value"),s=document.querySelector("#edit-priority-value"),i=document.querySelector("#save-changes-button");document.querySelector("#todo-title-value").value,document.querySelector("#todo-description-value").value,document.querySelector("#todo-date-value").value,document.querySelector("#todo-priority-value").value,c.value=r[t][0],a.value=r[t][1],l.value=r[t][2],s.value=r[t][3],i.addEventListener("click",(i=>{var u;r[t][0]=c.value,r[t][1]=a.value,r[t][2]=l.value,r[t][3]=s.value,e(o,r),u=t,document.getElementById(""+u).querySelectorAll("p").forEach((e=>{switch(e.id){case u+"title":e.innerHTML="Title: "+r[u][0];break;case u+"desc":e.innerHTML="Description: "+r[u][1];break;case u+"date":e.innerHTML="Due Date: "+r[u][2];break;case u+"priority":e.innerHTML="Priority: "+r[u][3]}})),n.classList.add("form-style")}))},y=t=>{(t=>{const r=document.querySelector("#selectProject").value,c=o();c.splice(t,1),e(r,c)})(t),s()}})();